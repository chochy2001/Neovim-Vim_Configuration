-- ConfiguraciÃ³n hÃ­brida de iconos: Nerd Font con fallbacks ASCII
return {
    {
        "nvim-tree/nvim-web-devicons",
        lazy = false,
        priority = 1000,
        config = function()
            local icons = require("nvim-web-devicons")

            -- Detectar si Nerd Font estÃ¡ funcionando
            local function test_nerd_font()
                -- Intentar mostrar un icono y ver si funciona
                return true -- Asumimos que funciona, si no, el usuario puede cambiar
            end

            local use_nerd_font = test_nerd_font()

            if use_nerd_font then
                -- ConfiguraciÃ³n Nerd Font (completa)
                icons.setup({
                    override = {
                        md = { icon = "", color = "#519aba", name = "Md" },
                        yaml = { icon = "", color = "#fbc02d", name = "Yaml" },
                        yml = { icon = "", color = "#fbc02d", name = "Yml" },
                        json = { icon = "", color = "#cbcb41", name = "Json" },
                        dart = { icon = "", color = "#03589C", name = "Dart" },
                        sh = { icon = "", color = "#4d5a5e", name = "Sh" },
                        log = { icon = "", color = "#81c784", name = "Log" },
                        txt = { icon = "", color = "#89e051", name = "Txt" },
                        c = { icon = "", color = "#599eff", name = "C" },
                        cpp = { icon = "", color = "#f34b7d", name = "Cpp" },
                        kt = { icon = "", color = "#7F52FF", name = "Kotlin" },
                        swift = { icon = "", color = "#e37933", name = "Swift" },
                    },
                    override_by_filename = {
                        ["README.md"] = { icon = "", color = "#42a5f5", name = "Readme" },
                        ["pubspec.yaml"] = { icon = "", color = "#03589C", name = "Pubspec" },
                        ["analysis_options.yaml"] = { icon = "", color = "#03589C", name = "AnalysisOptions" },
                        ["firebase.json"] = { icon = "", color = "#FFA000", name = "Firebase" },
                    },
                    default = true,
                })
                print("âœ… Iconos Nerd Font configurados")
            else
                -- ConfiguraciÃ³n ASCII fallback
                icons.setup({
                    override = {
                        md = { icon = "[M]", color = "#519aba", name = "Md" },
                        yaml = { icon = "[Y]", color = "#fbc02d", name = "Yaml" },
                        yml = { icon = "[Y]", color = "#fbc02d", name = "Yml" },
                        json = { icon = "[J]", color = "#cbcb41", name = "Json" },
                        dart = { icon = "[D]", color = "#03589C", name = "Dart" },
                        sh = { icon = "[S]", color = "#4d5a5e", name = "Sh" },
                        log = { icon = "[L]", color = "#81c784", name = "Log" },
                        txt = { icon = "[T]", color = "#89e051", name = "Txt" },
                    },
                    default = true,
                })
                print("âœ… Iconos ASCII fallback configurados")
            end

            -- Crear comandos para cambiar entre modos
            vim.api.nvim_create_user_command("UseNerdFontIcons", function()
                package.loaded['nvim-web-devicons'] = nil
                require("nvim-web-devicons").setup({
                    override = {
                        md = { icon = "", color = "#519aba", name = "Md" },
                        yaml = { icon = "", color = "#fbc02d", name = "Yaml" },
                        dart = { icon = "", color = "#03589C", name = "Dart" },
                    },
                    default = true,
                })
                vim.cmd("Lazy reload neo-tree.nvim")
                print("ðŸŽ¯ Cambiado a iconos Nerd Font")
            end, { desc = "Switch to Nerd Font icons" })

            vim.api.nvim_create_user_command("UseSimpleIcons", function()
                package.loaded['nvim-web-devicons'] = nil
                require("nvim-web-devicons").setup({
                    override = {
                        md = { icon = "[M]", color = "#519aba", name = "Md" },
                        yaml = { icon = "[Y]", color = "#fbc02d", name = "Yaml" },
                        dart = { icon = "[D]", color = "#03589C", name = "Dart" },
                        sh = { icon = "[S]", color = "#4d5a5e", name = "Sh" },
                        json = { icon = "[J]", color = "#cbcb41", name = "Json" },
                        log = { icon = "[L]", color = "#81c784", name = "Log" },
                        txt = { icon = "[T]", color = "#89e051", name = "Txt" },
                    },
                    default = true,
                })
                vim.cmd("Lazy reload neo-tree.nvim")
                print("ðŸ“„ Cambiado a iconos ASCII simples")
            end, { desc = "Switch to simple ASCII icons" })
        end,
    }
}
