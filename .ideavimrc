" ~/.ideavimrc - Revisado y Ampliado
" 游꼝 OPTIMIZADO PARA macOS (MacBook Pro)
" Configuraci칩n sincronizada con Neovim para flujo de trabajo consistente

" -----------------------------------------------------------------------------
" L칤der y Configuraci칩n B치sica
" -----------------------------------------------------------------------------
let mapleader = " "
set number
set relativenumber
set tabstop=4
set shiftwidth=4
set expandtab
set smartindent
set scrolloff=8         " Mantener 8 l칤neas visibles arriba/abajo del cursor
set cursorline        " Resaltar l칤nea actual
set colorcolumn=80      " Marcador visual en la columna 80
set clipboard=unnamedplus " Usar portapapeles del sistema
set laststatus=2      " Siempre mostrar barra de estado
set showcmd           " Mostrar comando parcial
set noshowmode        " No mostrar -- INSERT -- (IDE ya lo indica)
set timeoutlen=300    " Reducir tiempo de espera para mapeos <leader>
set splitright        " Nuevos splits verticales a la derecha
set splitbelow        " Nuevos splits horizontales abajo
set nowrap            " Deshabilitar salto de l칤nea autom치tico (opcional)

" Emulaciones de Plugins
set surround          " Habilitar emulaci칩n vim-surround (ys, cs, ds)

" -----------------------------------------------------------------------------
" B칰squeda
" -----------------------------------------------------------------------------
set incsearch         " B칰squeda incremental
set hlsearch          " Resaltar resultados
set ignorecase        " Ignorar may칰sculas/min칰sculas en b칰squeda
set smartcase         " Usar may칰sculas/min칰sculas si la b칰squeda contiene may칰sculas
nnoremap <leader><space> :nohlsearch<CR> 
" Limpiar resaltado de b칰squeda

" -----------------------------------------------------------------------------
" Mapeos Core y Navegaci칩n B치sica
" -----------------------------------------------------------------------------
imap jj <Esc>         
" Salir de modo inserci칩n

" Historial de Navegaci칩n IDE
nnoremap <leader>b :action Back<CR>
nnoremap <leader>f :action Forward<CR>

" Navegaci칩n entre Splits del IDE
nnoremap <leader>h <C-w>h
nnoremap <leader>j <C-w>j
nnoremap <leader>k <C-w>k
nnoremap <leader>l <C-w>l

" Mover L칤neas
nnoremap <A-j> :m .+1<CR>==
nnoremap <A-k> :m .-2<CR>==
vnoremap <A-j> :m '>+1<CR>gv=gv
vnoremap <A-k> :m '<-2<CR>gv=gv

" Indentaci칩n en Modo Visual
vnoremap > >gv
vnoremap < <gv

" Centrar Pantalla en Movimientos
nnoremap n nzz
nnoremap N Nzz
nnoremap * *zz
nnoremap # #zz
nnoremap g* g*zz
nnoremap g# g#zz

" Conversi칩n May칰sculas/Min칰sculas (Visual)
vnoremap <leader>u gu
vnoremap <leader>U gU

" -----------------------------------------------------------------------------
" Emulaci칩n Telescope (B칰squeda/Navegaci칩n Archivos)
" -----------------------------------------------------------------------------
nnoremap <leader>pf :action GotoFile<CR>
" Buscar archivo por nombre
nnoremap <leader>pg :action FindInPath<CR>
" Buscar texto en proyecto (grep)
nnoremap <leader>ps :action GotoSymbol<CR>
" Buscar s칤mbolo (clase, m칠todo, var)
nnoremap <leader>fb :action Switcher<CR>
" Cambiar entre archivos/tabs recientes (buffers)
nnoremap <leader>rf :action RecentFiles<CR>
" Archivos recientes

" Double Shift para b칰squeda r치pida (nativo en IntelliJ)
" NOTA: Shift+Shift es nativo en IntelliJ, no necesita mapping
" Alternativa sincronizada con Neovim: doble coma
nnoremap ,, :action GotoFile<CR>
" Buscar archivos con doble coma (sincronizado con Neovim)

" -----------------------------------------------------------------------------
" Emulaci칩n Neo-tree (Vista Proyecto)
" -----------------------------------------------------------------------------
nnoremap <leader>pv :action ActivateProjectToolWindow<CR>
" Abrir/Enfocar vista Proyecto
nnoremap <leader>e :action ActivateProjectToolWindow<CR>
" Alias (como en tu nvim)
nnoremap <leader>fe :action SelectInProjectView<CR>
" Resaltar archivo actual en Proyecto
nnoremap <leader>fr :action SelectInProjectView<CR>
" Revelar archivo actual en 치rbol (como Neovim)

" Navegaci칩n r치pida proyecto (macOS optimized)
" Cmd+1 - Enfocar proyecto, Cmd+Shift+1 - Toggle proyecto (nativo IntelliJ macOS)
" NOTA: En macOS, IntelliJ usa Cmd en lugar de Ctrl por defecto
" En Neovim est치n mapeados como <D-1> (Cmd+1) y <D-S-1> (Cmd+Shift+1)
" Tambi칠n disponible: <C-1> como alternativa

" -----------------------------------------------------------------------------
" Emulaci칩n Harpoon (Marcas R치pidas)
" -----------------------------------------------------------------------------
nnoremap <leader>1 '1
nnoremap <leader>2 '2
nnoremap <leader>3 '3
nnoremap <leader>4 '4
nnoremap <leader>5 '5
nnoremap <leader>6 '6
nnoremap <leader>7 '7
nnoremap <leader>8 '8
nnoremap <leader>9 '9
" Para marcar: m1, m2, etc. (comportamiento est치ndar de Vim)

" -----------------------------------------------------------------------------
" Gesti칩n de Buffers / Tabs del IDE
" -----------------------------------------------------------------------------
" Navegaci칩n r치pida (sincronizado con Neovim)
nnoremap <S-l> :action NextTab<CR>
" Siguiente tab/buffer (Shift+L)
nnoremap <S-h> :action PreviousTab<CR>
" Tab/buffer anterior (Shift+H)

" Navegaci칩n alternativa con leader
nnoremap <leader>bn :action NextTab<CR>
" Tab siguiente
nnoremap <leader>bp :action PreviousTab<CR>
" Tab anterior
nnoremap <leader>tc :action CloseContent<CR>
" Cerrar tab actual
nnoremap <leader>to :action CloseAllEditorsButActive<CR>
" Cerrar otras tabs (mejor que :tabonly)
nnoremap <leader>tn :action NewScratchFile<CR>
" Nuevo archivo temporal (Scratch)

" -----------------------------------------------------------------------------
" Terminal Integrada
" -----------------------------------------------------------------------------
nnoremap <leader>tt :action ActivateTerminalToolWindow<CR>
tnoremap <Esc> <C-\><C-n> " Salir de modo terminal a normal

" -----------------------------------------------------------------------------
" Git / VCS (Control de Versiones)
" -----------------------------------------------------------------------------
" Acciones Comunes
nnoremap <leader>gs :action ActivateVersionControlToolWindow<CR> 
" Abrir ventana Git/VCS (Status/Changes)
nnoremap <leader>gc :action CheckinProject<CR>             
" Commit
nnoremap <leader>gps :action Vcs.Push<CR>                   
" Push
nnoremap <leader>gpl :action Vcs.UpdateProject<CR>          
" Pull

" Historial y Diferencias
nnoremap <leader>gl :action Vcs.ShowTabbedFileHistory<CR>   
" Historial del archivo actual
nnoremap <leader>gC :action Vcs.ShowHistoryForBlock<CR>     
" Historial de la selecci칩n (si hay) o l칤nea
nnoremap <leader>gd :action Diff.ShowDiff<CR>              
" Mostrar cambios (Diff) del archivo actual

" Navegaci칩n por Cambios (Hunks)
nnoremap <leader>gn :action Vcs.MoveToNextChange<CR>       
" Ir al siguiente cambio (hunk)
nnoremap <leader>gp :action Vcs.MoveToPreviousChange<CR>   
" Ir al cambio anterior (hunk)
" nnoremap ]c <leader>gn " Alias opcional
" nnoremap [c <leader>gp " Alias opcional

" Otras acciones VCS
nnoremap <leader>ga :action Vcs.Add<CR>                     
" Add (Stage) - Suele hacerse en la UI
nnoremap <leader>gu :action Vcs.RollbackChangedLines<CR>   
" Revertir hunk/l칤neas cambiadas
nnoremap <leader>gb :action Vcs.Branches<CR>               
" Popup de Ramas (Branches)

" Alias para ventanas (como en tu config original)
nnoremap <leader>gg :action ActivateVersionControlToolWindow<CR>
nnoremap <leader>gS :action ActivateVersionControlToolWindow<CR>
nnoremap <leader>ng :action ActivateVersionControlToolWindow<CR> 
" Equivalente Neotree Git Status

" -----------------------------------------------------------------------------
" Emulaci칩n Undotree (Historial Local del IDE)
" -----------------------------------------------------------------------------
nnoremap <leader>u :action LocalHistory.ShowHistory<CR>
" NOTA: set undodir/undofile no aplican aqu칤. Se usa el historial del IDE.

" -----------------------------------------------------------------------------
" Formateo y Comentarios
" -----------------------------------------------------------------------------
nnoremap <leader>ff :action ReformatCode<CR>
vnoremap <leader>ff :action ReformatCode<CR>

nnoremap gcc :action CommentByLineComment<CR>
vnoremap gc :action CommentByLineComment<CR>

" -----------------------------------------------------------------------------
" LSP / Acciones de C칩digo Inteligente
" -----------------------------------------------------------------------------
" Navegaci칩n
nnoremap K  :action QuickJavaDoc<CR>             
" Mostrar documentaci칩n (Hover)
nnoremap gd :action GotoDeclaration<CR>          
" Ir a Definici칩n (general)
nnoremap gi :action GotoImplementation<CR>       
" Ir a Implementaci칩n (espec칤fico)
nnoremap go :action GotoTypeDeclaration<CR>      
" Ir a Definici칩n de Tipo
nnoremap gr :action FindUsages<CR>               
" Encontrar Usos / Referencias

" Informaci칩n y Acciones R치pidas
nnoremap gs :action ParameterInfo<CR>            
" Informaci칩n de Par치metros (en llamada funci칩n)
nnoremap <leader>ca :action ShowIntentionActions<CR> 
" Mostrar Acciones/Correcciones (bombilla)
inoremap <C-space> <C-x><C-o>                    
" Forzar autocompletado (si es necesario)

" Renombrar y Refactorizar
nnoremap <leader>rn :action RenameElement<CR>             
" Lista r치pida de Refactors
" Mapeos opcionales para refactors comunes:
" nnoremap <leader>rm :action ExtractMethod<CR>
" nnoremap <leader>rv :action IntroduceVariable<CR>

" -----------------------------------------------------------------------------
" Emulaci칩n Trouble (Lista de Problemas/Errores del IDE)
" -----------------------------------------------------------------------------
nnoremap <leader>xo :action ActivateProblemsViewToolWindow<CR> 
" Abrir/Enfocar ventana Problemas
nnoremap <leader>xn :action GotoNextError<CR>               
" Ir al siguiente Error/Warning
nnoremap <leader>xp :action GotoPreviousError<CR>           
" Ir al Error/Warning anterior
" Alias opcionales (como en tu config nvim)
" nnoremap ]d <leader>xn
" nnoremap [d <leader>xp

" -----------------------------------------------------------------------------
" Plegado (Folding)
" -----------------------------------------------------------------------------
" set foldmethod=indent " El IDE suele usar sintaxis, pero indent es opci칩n
" set foldlevelstart=99 " Empezar con todo desplegado
" nnoremap za za        " Alternar plegado
" nnoremap zR zR        " Desplegar todo
" nnoremap zM zM        " Plegar todo
" Acciones del IDE pueden ser m치s potentes:
nnoremap <leader>za :action FoldingRegions.toggleFoldRegion<CR>
nnoremap <leader>zR :action FoldingRegions.expandAllRegions<CR>
nnoremap <leader>zM :action FoldingRegions.collapseAllRegions<CR>
nnoremap <leader>zr :action FoldingRegions.expandRegionRecursively<CR>
nnoremap <leader>zm :action FoldingRegions.collapseRegionRecursively<CR>

" -----------------------------------------------------------------------------
" Acciones R치pidas del IDE (Build/Run/Debug)
" -----------------------------------------------------------------------------
nnoremap <leader>rr :action Run<CR>          
" Ejecutar
nnoremap <leader>rd :action Debug<CR>         
" Depurar
nnoremap <leader>rs :action Stop<CR>          
" Detener
nnoremap <leader>rb :action BuildProject<CR>   
" Construir Proyecto

" Acciones de Depuraci칩n adicionales (opcional):
" nnoremap <leader>dc :action Resume<CR>       " Continuar (F9)
" nnoremap <leader>do :action StepOver<CR>     " Paso por encima (F8)
" nnoremap <leader>di :action StepInto<CR>     " Paso adentro (F7)
" nnoremap <leader>ds :action StepOut<CR>      " Paso afuera (Shift+F8)
" nnoremap <leader>db :action ToggleLineBreakpoint<CR> " Poner/Quitar Breakpoint

" -----------------------------------------------------------------------------
" Gesti칩n Adicional de Ventanas (Splits)
" -----------------------------------------------------------------------------
nnoremap <leader>sv :action SplitVertically<CR>     
" Crear split vertical
nnoremap <leader>sh :action SplitHorizontally<CR>   
" Crear split horizontal
nnoremap <leader>sc :action Unsplit<CR>             
" Cerrar split actual
nnoremap <leader>so :action UnsplitAll<CR>          
" Cerrar todos los splits excepto el actual
nnoremap <leader>_ :action MaximizeEditorInSplit<CR> 
" Maximizar/Restaurar split

" -----------------------------------------------------------------------------
" Vistas R치pidas (Popups)
" -----------------------------------------------------------------------------
nnoremap <leader>K :action QuickJavaDoc<CR>           
" Popup Documentaci칩n R치pida
nnoremap <leader>I :action QuickImplementations<CR>   
" Popup Implementaciones R치pidas



" -----------------------------------------------------------------------------
" Fin de .ideavimrc
" -----------------------------------------------------------------------------
" Guarda como ~/.ideavimrc (o %USERPROFILE%/_ideavimrc en Windows)
" Recarga con ':source ~/.ideavimrc' o reiniciando el IDE.
" 춰Usa ':actionlist [filtro]' para buscar m치s acciones!
